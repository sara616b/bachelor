{% include "cms/Modules/MessagesList.html" %}
{% load get_item %}
    <details
        style="order:{{component.order}};"
        class="grid mx-2 leading-10 border border-white"
    >
        <summary
            class="flex flex-row items-center justify-between gap-2 px-4 bg-indigo-50"
        >
            <div
                class="flex flex-row items-center gap-2 "
            >
                <svg xmlns="http://www.w3.org/2000/svg" height="25" viewBox="0 -960 960 960" width="25"><path d="M180-180h44l443-443-44-44-443 443v44Zm614-486L666-794l42-42q17-17 42-17t42 17l44 44q17 17 17 42t-17 42l-42 42Zm-42 42L248-120H120v-128l504-504 128 128Zm-107-21-22-22 44 44-22-22Z"/></svg>
                {{component.order}}. {{component.name}}
            </div>

            {% url 'DeleteComponentView' component_id=component.id as delete_url %}
            <div
                class="flex flex-row items-center gap-2 "
            >
                {% include "cms/Components/Button.html" with text="Delete" delete=delete_url target=None swap="outerHTML" compact=True color="#ce6060" classes="float-right my-1" confirm="Are you sure you wish to delete the component?" %}
                <button
                    class="{% if component.order == 1 %}opacity-30{% else %}hover:cursor-pointer hover:opacity-70{% endif %}"
                    hx-post="{% url 'MoveComponentView' slug=page.slug component_id=component.id direction="up" %}"
                    hx-swap="outerHTML"
                    hx-trigger="click"
                    {% if component.order == 1 %}disabled{% endif%}
                    title="Move up"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" height="30" viewBox="0 -960 960 960" width="30"><path d="M450-332h60v-182l74 74 42-42-146-146-146 146 42 42 74-74v182Zm30 252q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 31.5-156t86-127Q252-817 325-848.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 82-31.5 155T763-197.5q-54 54.5-127 86T480-80Zm0-60q142 0 241-99.5T820-480q0-142-99-241t-241-99q-141 0-240.5 99T140-480q0 141 99.5 240.5T480-140Zm0-340Z"/></svg>
                </button>
                <button
                    class="{% if component.order == components|length %}opacity-30{% else %}hover:cursor-pointer hover:opacity-70{% endif %}"
                    hx-post="{% url 'MoveComponentView' slug=page.slug component_id=component.id direction="down" %}"
                    hx-swap="outerHTML"
                    hx-trigger="click"
                    {% if component.order == components|length %}disabled{% endif %}
                    title="Move Down"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" height="30" viewBox="0 -960 960 960" width="30" class="hover:cursor-pointer hover:opacity-70"><path d="m480-332 146-146-42-42-74 74v-182h-60v182l-74-74-42 42 146 146Zm0 252q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 31.5-156t86-127Q252-817 325-848.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 82-31.5 155T763-197.5q-54 54.5-127 86T480-80Zm0-60q142 0 241-99.5T820-480q0-142-99-241t-241-99q-141 0-240.5 99T140-480q0 141 99.5 240.5T480-140Zm0-340Z"/></svg>
                </button>
            </div>
        </summary>
        <form
            class="grid gap-2 p-4 border"
            hx-put="{% url 'EditComponentView' slug=page.slug component_id=component.id %}"
            hx-target="this"
            hx-swap="innerhtml"
        >
            {% include "Cms/Modules/ComponentForm.html" with column=column %}
        </form>
    </details>